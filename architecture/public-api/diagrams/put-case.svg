<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="550px" preserveAspectRatio="none" style="width:1166px;height:550px;" version="1.1" viewBox="0 0 1166 550" width="1166px" zoomAndPan="magnify"><defs><filter height="300%" id="f1llipmu39h7t3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1llipmu39h7t3)" height="226.4844" style="stroke:#000000;stroke-width:2.0;" width="1142" x="10" y="222.7305"/><rect fill="#FFFFFF" filter="url(#f1llipmu39h7t3)" height="105.2422" style="stroke:#000000;stroke-width:2.0;" width="570" x="20" y="247.041"/><rect fill="#FFFFFF" filter="url(#f1llipmu39h7t3)" height="75.9316" style="stroke:#000000;stroke-width:2.0;" width="410" x="732" y="366.2832"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="52" x2="52" y1="88.4883" y2="466.2148"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="205.5" x2="205.5" y1="88.4883" y2="466.2148"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="372" x2="372" y1="88.4883" y2="466.2148"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="539" x2="539" y1="88.4883" y2="466.2148"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="661" x2="661" y1="88.4883" y2="466.2148"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="773" x2="773" y1="88.4883" y2="466.2148"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="948" x2="948" y1="88.4883" y2="466.2148"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1082" x2="1082" y1="88.4883" y2="466.2148"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="30" y="85.5352">Index</text><ellipse cx="52.5" cy="15" fill="#FEFECE" filter="url(#f1llipmu39h7t3)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M52.5,23 L52.5,50 M39.5,31 L65.5,31 M52.5,50 L39.5,65 M52.5,50 L65.5,65 " fill="none" filter="url(#f1llipmu39h7t3)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="30" y="478.75">Index</text><ellipse cx="52.5" cy="491.7031" fill="#FEFECE" filter="url(#f1llipmu39h7t3)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M52.5,499.7031 L52.5,526.7031 M39.5,507.7031 L65.5,507.7031 M52.5,526.7031 L39.5,541.7031 M52.5,526.7031 L65.5,541.7031 " fill="none" filter="url(#f1llipmu39h7t3)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1llipmu39h7t3)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="42" x="182.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="189.5" y="73.5352">App</text><rect fill="#FEFECE" filter="url(#f1llipmu39h7t3)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="42" x="182.5" y="465.2148"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="189.5" y="485.75">App</text><rect fill="#FEFECE" filter="url(#f1llipmu39h7t3)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="67" x="337" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="344" y="73.5352">Firewall</text><rect fill="#FEFECE" filter="url(#f1llipmu39h7t3)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="67" x="337" y="465.2148"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="344" y="485.75">Firewall</text><rect fill="#FEFECE" filter="url(#f1llipmu39h7t3)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="77" x="499" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="506" y="73.5352">PublicAPI</text><rect fill="#FEFECE" filter="url(#f1llipmu39h7t3)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="77" x="499" y="465.2148"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="506" y="485.75">PublicAPI</text><path d="M595,62 L727,62 C732,62 732,75.2441 732,75.2441 C732,75.2441 732,88.4883 727,88.4883 L595,88.4883 C590,88.4883 590,75.2441 590,75.2441 C590,75.2441 590,62 595,62 " fill="#FEFECE" filter="url(#f1llipmu39h7t3)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M727,62 C722,62 722,75.2441 722,75.2441 C722,88.4883 727,88.4883 727,88.4883 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="595" y="80.5352">SluiceRedisQueue</text><path d="M595,465.2148 L727,465.2148 C732,465.2148 732,478.459 732,478.459 C732,478.459 732,491.7031 727,491.7031 L595,491.7031 C590,491.7031 590,478.459 590,478.459 C590,478.459 590,465.2148 595,465.2148 " fill="#FEFECE" filter="url(#f1llipmu39h7t3)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M727,465.2148 C722,465.2148 722,478.459 722,478.459 C722,491.7031 727,491.7031 727,491.7031 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="595" y="483.75">SluiceRedisQueue</text><rect fill="#FEFECE" filter="url(#f1llipmu39h7t3)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="58" x="742" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="749" y="73.5352">Bridge</text><rect fill="#FEFECE" filter="url(#f1llipmu39h7t3)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="58" x="742" y="465.2148"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="749" y="485.75">Bridge</text><rect fill="#FEFECE" filter="url(#f1llipmu39h7t3)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="144" x="874" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="881" y="73.5352">HealthAuthorityAPI</text><rect fill="#FEFECE" filter="url(#f1llipmu39h7t3)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="144" x="874" y="465.2148"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="881" y="485.75">HealthAuthorityAPI</text><rect fill="#FEFECE" filter="url(#f1llipmu39h7t3)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="96" x="1032" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="1039" y="73.5352">RedisQueue</text><rect fill="#FEFECE" filter="url(#f1llipmu39h7t3)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="96" x="1032" y="465.2148"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="1039" y="485.75">RedisQueue</text><polygon fill="#A80036" points="193.5,115.7988,203.5,119.7988,193.5,123.7988,197.5,119.7988" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="52.5" x2="199.5" y1="119.7988" y2="119.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="59.5" y="115.0566">Submit case data</text><polygon fill="#A80036" points="360.5,145.1094,370.5,149.1094,360.5,153.1094,364.5,149.1094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="205.5" x2="366.5" y1="149.1094" y2="149.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="212.5" y="144.3672">PUT /v2/cases/{token}</text><polygon fill="#A80036" points="527.5,174.4199,537.5,178.4199,527.5,182.4199,531.5,178.4199" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="372.5" x2="533.5" y1="178.4199" y2="178.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="379.5" y="173.6777">PUT /v2/cases/{token}</text><polygon fill="#A80036" points="1070,203.7305,1080,207.7305,1070,211.7305,1074,207.7305" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="539.5" x2="1076" y1="207.7305" y2="207.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="546.5" y="202.9883">Queue case submit</text><path d="M10,222.7305 L78,222.7305 L78,229.7305 L68,239.7305 L10,239.7305 L10,222.7305 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="226.4844" style="stroke:#000000;stroke-width:2.0;" width="1142" x="10" y="222.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="23" x="25" y="236.2988">par</text><path d="M20,247.041 L110,247.041 L110,254.041 L100,264.041 L20,264.041 L20,247.041 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="105.2422" style="stroke:#000000;stroke-width:2.0;" width="570" x="20" y="247.041"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="41" x="35" y="260.6094">group</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="61" x="125" y="259.6758">[Response]</text><polygon fill="#A80036" points="383.5,281.6621,373.5,285.6621,383.5,289.6621,379.5,285.6621" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="377.5" x2="538.5" y1="285.6621" y2="285.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="389.5" y="280.9199">Accepted</text><polygon fill="#A80036" points="216.5,310.9727,206.5,314.9727,216.5,318.9727,212.5,314.9727" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="210.5" x2="371.5" y1="314.9727" y2="314.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="222.5" y="310.2305">Accepted</text><polygon fill="#A80036" points="63.5,340.2832,53.5,344.2832,63.5,348.2832,59.5,344.2832" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="57.5" x2="204.5" y1="344.2832" y2="344.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="69.5" y="339.541">Case data submitted</text><path d="M732,366.2832 L822,366.2832 L822,373.2832 L812,383.2832 L732,383.2832 L732,366.2832 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:2.0;" width="410" x="732" y="366.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="41" x="747" y="379.8516">group</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="44" x="837" y="378.918">[Bridge]</text><polygon fill="#A80036" points="784,400.9043,774,404.9043,784,408.9043,780,404.9043" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="778" x2="1081" y1="404.9043" y2="404.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="790" y="400.1621">Process case submit</text><polygon fill="#A80036" points="936,430.2148,946,434.2148,936,438.2148,940,434.2148" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="773" x2="942" y1="434.2148" y2="434.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="780" y="429.4727">POST /v1/cases/{token}</text><!--MD5=[77b83552091759db84064069ab3c8d6a]
@startuml
actor       Index              as Index
participant App                as App
participant Firewall           as Firewall
participant PublicAPI          as API
queue       SluiceRedisQueue   as SluiceRedisQueue
participant Bridge             as Bridge
participant HealthAuthorityAPI as HAAPI

Index      ->  App        : Submit case data
App        ->  Firewall   : PUT /v2/cases/{token}
Firewall   ->  API        : PUT /v2/cases/{token}
API        ->  RedisQueue : Queue case submit

par
    group group [Response]
        API        - -> Firewall   : Accepted
        Firewall   - -> App        : Accepted
        App        ->  Index      : Case data submitted
    end

    group group [Bridge]
        RedisQueue - -> Bridge     : Process case submit
        Bridge     ->  HAAPI      : POST /v1/cases/{token}
    end
end
@enduml

PlantUML version 1.2021.5(Sun Apr 25 13:20:28 CEST 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: NL
--></g></svg>