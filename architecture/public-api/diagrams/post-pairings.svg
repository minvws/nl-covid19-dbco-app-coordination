<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="704px" preserveAspectRatio="none" style="width:1505px;height:704px;" version="1.1" viewBox="0 0 1505 704" width="1505px" zoomAndPan="magnify"><defs><filter height="300%" id="fkt2pkpf00qcn" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="27" x2="27" y1="88.4883" y2="619.7676"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="177.5" x2="177.5" y1="88.4883" y2="619.7676"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="340" x2="340" y1="88.4883" y2="619.7676"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="503" x2="503" y1="88.4883" y2="619.7676"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="722" x2="722" y1="88.4883" y2="619.7676"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="845" x2="845" y1="88.4883" y2="619.7676"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1018" x2="1018" y1="88.4883" y2="619.7676"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1327" x2="1327" y1="88.4883" y2="619.7676"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1453" x2="1453" y1="88.4883" y2="619.7676"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="5" y="85.5352">Index</text><ellipse cx="27.5" cy="15" fill="#FEFECE" filter="url(#fkt2pkpf00qcn)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M27.5,23 L27.5,50 M14.5,31 L40.5,31 M27.5,50 L14.5,65 M27.5,50 L40.5,65 " fill="none" filter="url(#fkt2pkpf00qcn)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="5" y="632.3027">Index</text><ellipse cx="27.5" cy="645.2559" fill="#FEFECE" filter="url(#fkt2pkpf00qcn)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M27.5,653.2559 L27.5,680.2559 M14.5,661.2559 L40.5,661.2559 M27.5,680.2559 L14.5,695.2559 M27.5,680.2559 L40.5,695.2559 " fill="none" filter="url(#fkt2pkpf00qcn)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#fkt2pkpf00qcn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="42" x="154.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="161.5" y="73.5352">App</text><rect fill="#FEFECE" filter="url(#fkt2pkpf00qcn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="42" x="154.5" y="618.7676"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="161.5" y="639.3027">App</text><rect fill="#FEFECE" filter="url(#fkt2pkpf00qcn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="67" x="305" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="312" y="73.5352">Firewall</text><rect fill="#FEFECE" filter="url(#fkt2pkpf00qcn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="67" x="305" y="618.7676"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="312" y="639.3027">Firewall</text><rect fill="#FEFECE" filter="url(#fkt2pkpf00qcn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="77" x="463" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="470" y="73.5352">PublicAPI</text><rect fill="#FEFECE" filter="url(#fkt2pkpf00qcn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="77" x="463" y="618.7676"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="470" y="639.3027">PublicAPI</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="681" y="85.5352">SluiceRedis</text><path d="M704.5,36 C704.5,26 722.5,26 722.5,26 C722.5,26 740.5,26 740.5,36 L740.5,62 C740.5,72 722.5,72 722.5,72 C722.5,72 704.5,72 704.5,62 L704.5,36 " fill="#FEFECE" filter="url(#fkt2pkpf00qcn)" style="stroke:#000000;stroke-width:1.5;"/><path d="M704.5,36 C704.5,46 722.5,46 722.5,46 C722.5,46 740.5,46 740.5,36 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="681" y="632.3027">SluiceRedis</text><path d="M704.5,645.2559 C704.5,635.2559 722.5,635.2559 722.5,635.2559 C722.5,635.2559 740.5,635.2559 740.5,645.2559 L740.5,671.2559 C740.5,681.2559 722.5,681.2559 722.5,681.2559 C722.5,681.2559 704.5,681.2559 704.5,671.2559 L704.5,645.2559 " fill="#FEFECE" filter="url(#fkt2pkpf00qcn)" style="stroke:#000000;stroke-width:1.5;"/><path d="M704.5,645.2559 C704.5,655.2559 722.5,655.2559 722.5,655.2559 C722.5,655.2559 740.5,655.2559 740.5,645.2559 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><path d="M779,62 L911,62 C916,62 916,75.2441 916,75.2441 C916,75.2441 916,88.4883 911,88.4883 L779,88.4883 C774,88.4883 774,75.2441 774,75.2441 C774,75.2441 774,62 779,62 " fill="#FEFECE" filter="url(#fkt2pkpf00qcn)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M911,62 C906,62 906,75.2441 906,75.2441 C906,88.4883 911,88.4883 911,88.4883 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="779" y="80.5352">SluiceRedisQueue</text><path d="M779,618.7676 L911,618.7676 C916,618.7676 916,632.0117 916,632.0117 C916,632.0117 916,645.2559 911,645.2559 L779,645.2559 C774,645.2559 774,632.0117 774,632.0117 C774,632.0117 774,618.7676 779,618.7676 " fill="#FEFECE" filter="url(#fkt2pkpf00qcn)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M911,618.7676 C906,618.7676 906,632.0117 906,632.0117 C906,645.2559 911,645.2559 911,645.2559 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="779" y="637.3027">SluiceRedisQueue</text><rect fill="#FEFECE" filter="url(#fkt2pkpf00qcn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="58" x="987" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="994" y="73.5352">Bridge</text><rect fill="#FEFECE" filter="url(#fkt2pkpf00qcn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="58" x="987" y="618.7676"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="994" y="639.3027">Bridge</text><rect fill="#FEFECE" filter="url(#fkt2pkpf00qcn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="144" x="1253" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="1260" y="73.5352">HealthAuthorityAPI</text><rect fill="#FEFECE" filter="url(#fkt2pkpf00qcn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="144" x="1253" y="618.7676"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="1260" y="639.3027">HealthAuthorityAPI</text><rect fill="#FEFECE" filter="url(#fkt2pkpf00qcn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="80" x="1411" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="1418" y="73.5352">Caregiver</text><rect fill="#FEFECE" filter="url(#fkt2pkpf00qcn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="80" x="1411" y="618.7676"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="1418" y="639.3027">Caregiver</text><polygon fill="#A80036" points="38.5,115.7988,28.5,119.7988,38.5,123.7988,34.5,119.7988" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="32.5" x2="1452" y1="119.7988" y2="119.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="44.5" y="115.0566">Communicate pairing code</text><polygon fill="#A80036" points="165.5,145.1094,175.5,149.1094,165.5,153.1094,169.5,149.1094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="27.5" x2="171.5" y1="149.1094" y2="149.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="34.5" y="144.3672">Submit pairing code</text><polygon fill="#A80036" points="328.5,174.4199,338.5,178.4199,328.5,182.4199,332.5,178.4199" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="177.5" x2="334.5" y1="178.4199" y2="178.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="184.5" y="173.6777">POST /v2/pairings</text><polygon fill="#A80036" points="491.5,203.7305,501.5,207.7305,491.5,211.7305,495.5,207.7305" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="340.5" x2="497.5" y1="207.7305" y2="207.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="347.5" y="202.9883">POST /v2/pairings</text><polygon fill="#A80036" points="710.5,233.041,720.5,237.041,710.5,241.041,714.5,237.041" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="503.5" x2="716.5" y1="237.041" y2="237.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="510.5" y="232.2988">Get pairing request for code</text><polygon fill="#A80036" points="514.5,262.3516,504.5,266.3516,514.5,270.3516,510.5,266.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="508.5" x2="721.5" y1="266.3516" y2="266.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="520.5" y="261.6094">Pairing request</text><line style="stroke:#A80036;stroke-width:1.0;" x1="503.5" x2="545.5" y1="295.6621" y2="295.6621"/><line style="stroke:#A80036;stroke-width:1.0;" x1="545.5" x2="545.5" y1="295.6621" y2="308.6621"/><line style="stroke:#A80036;stroke-width:1.0;" x1="504.5" x2="545.5" y1="308.6621" y2="308.6621"/><polygon fill="#A80036" points="514.5,304.6621,504.5,308.6621,514.5,312.6621,510.5,308.6621" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="510.5" y="290.9199">Verify pairing request</text><polygon fill="#A80036" points="710.5,333.9727,720.5,337.9727,710.5,341.9727,714.5,337.9727" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="503.5" x2="716.5" y1="337.9727" y2="337.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="510.5" y="333.2305">Delete pairing request for code</text><polygon fill="#A80036" points="833,363.2832,843,367.2832,833,371.2832,837,367.2832" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="503.5" x2="839" y1="367.2832" y2="367.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="510.5" y="362.541">Queue pairing</text><polygon fill="#A80036" points="1006,392.5938,1016,396.5938,1006,400.5938,1010,396.5938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="845" x2="1012" y1="396.5938" y2="396.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="852" y="391.8516">Process pairing</text><polygon fill="#A80036" points="1315,421.9043,1325,425.9043,1315,429.9043,1319,425.9043" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1018" x2="1321" y1="425.9043" y2="425.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="1025" y="421.1621">POST /v1/cases/{caseUuid}/clients</text><polygon fill="#A80036" points="1029,451.2148,1019,455.2148,1029,459.2148,1025,455.2148" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1023" x2="1326" y1="455.2148" y2="455.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285" x="1035" y="450.4727">Pairing response (health authority public key)</text><polygon fill="#A80036" points="856,480.5254,846,484.5254,856,488.5254,852,484.5254" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="850" x2="1017" y1="484.5254" y2="484.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="862" y="479.7832">Queue pairing response</text><polygon fill="#A80036" points="514.5,509.8359,504.5,513.8359,514.5,517.8359,510.5,513.8359" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="508.5" x2="844" y1="513.8359" y2="513.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="520.5" y="509.0938">Pairing response</text><polygon fill="#A80036" points="351.5,539.1465,341.5,543.1465,351.5,547.1465,347.5,543.1465" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="345.5" x2="502.5" y1="543.1465" y2="543.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="357.5" y="538.4043">Pairing JSON response</text><polygon fill="#A80036" points="188.5,568.457,178.5,572.457,188.5,576.457,184.5,572.457" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="182.5" x2="339.5" y1="572.457" y2="572.457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="194.5" y="567.7148">Pairing JSON response</text><polygon fill="#A80036" points="38.5,597.7676,28.5,601.7676,38.5,605.7676,34.5,601.7676" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="32.5" x2="176.5" y1="601.7676" y2="601.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="44.5" y="597.0254">Show result</text><!--MD5=[4f93144d3ba934a5feb7bacd82bcc70b]
@startuml
actor       Index              as Index
participant App                as App
participant Firewall           as Firewall
participant PublicAPI          as API
database    SluiceRedis        as Redis
queue       SluiceRedisQueue   as RedisQueue
participant Bridge             as Bridge
participant HealthAuthorityAPI as HAAPI

Caregiver  -> Index       : Communicate pairing code
Index      ->  App        : Submit pairing code
App        ->  Firewall   : POST /v2/pairings
Firewall   ->  API        : POST /v2/pairings
API        ->  Redis      : Get pairing request for code
Redis      - -> API        : Pairing request
API        ->  API        : Verify pairing request
API        ->  Redis      : Delete pairing request for code
API        ->  RedisQueue : Queue pairing
RedisQueue - -> Bridge     : Process pairing
Bridge     ->  HAAPI      : POST /v1/cases/{caseUuid}/clients
HAAPI      - -> Bridge     : Pairing response (health authority public key)
Bridge     ->  RedisQueue : Queue pairing response
RedisQueue - -> API        : Pairing response
API        - -> Firewall   : Pairing JSON response
Firewall   - -> App        : Pairing JSON response
App        ->  Index      : Show result
@enduml

PlantUML version 1.2021.5(Sun Apr 25 13:20:28 CEST 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: NL
--></g></svg>