<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="370px" preserveAspectRatio="none" style="width:594px;height:370px;" version="1.1" viewBox="0 0 594 370" width="594px" zoomAndPan="magnify"><defs><filter height="300%" id="f1s38r6qq3ev7l" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="36" x2="36" y1="67.4883" y2="302.3516"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="345" x2="345" y1="67.4883" y2="302.3516"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="567.5" x2="567.5" y1="67.4883" y2="302.3516"/><rect fill="#FEFECE" filter="url(#f1s38r6qq3ev7l)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="58" x="5" y="32"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="12" y="52.5352">Bridge</text><rect fill="#FEFECE" filter="url(#f1s38r6qq3ev7l)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="58" x="5" y="301.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="12" y="321.8867">Bridge</text><rect fill="#FEFECE" filter="url(#f1s38r6qq3ev7l)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="144" x="271" y="32"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="278" y="52.5352">HealthAuthorityAPI</text><rect fill="#FEFECE" filter="url(#f1s38r6qq3ev7l)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="144" x="271" y="301.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="278" y="321.8867">HealthAuthorityAPI</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="542.5" y="64.5352">MySQL</text><path d="M550,15 C550,5 568,5 568,5 C568,5 586,5 586,15 L586,41 C586,51 568,51 568,51 C568,51 550,51 550,41 L550,15 " fill="#FEFECE" filter="url(#f1s38r6qq3ev7l)" style="stroke:#000000;stroke-width:1.5;"/><path d="M550,15 C550,25 568,25 568,25 C568,25 586,25 586,15 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="542.5" y="314.8867">MySQL</text><path d="M550,327.8398 C550,317.8398 568,317.8398 568,317.8398 C568,317.8398 586,317.8398 586,327.8398 L586,353.8398 C586,363.8398 568,363.8398 568,363.8398 C568,363.8398 550,363.8398 550,353.8398 L550,327.8398 " fill="#FEFECE" filter="url(#f1s38r6qq3ev7l)" style="stroke:#000000;stroke-width:1.5;"/><path d="M550,327.8398 C550,337.8398 568,337.8398 568,337.8398 C568,337.8398 586,337.8398 586,327.8398 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><polygon fill="#A80036" points="333,94.7988,343,98.7988,333,102.7988,337,98.7988" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="36" x2="339" y1="98.7988" y2="98.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="43" y="94.0566">POST /v1/cases/{caseUuid}/clients</text><line style="stroke:#A80036;stroke-width:1.0;" x1="345" x2="387" y1="128.1094" y2="128.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="387" x2="387" y1="128.1094" y2="141.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="346" x2="387" y1="141.1094" y2="141.1094"/><polygon fill="#A80036" points="356,137.1094,346,141.1094,356,145.1094,352,141.1094" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="352" y="123.3672">Register client</text><line style="stroke:#A80036;stroke-width:1.0;" x1="345" x2="387" y1="170.4199" y2="170.4199"/><line style="stroke:#A80036;stroke-width:1.0;" x1="387" x2="387" y1="170.4199" y2="183.4199"/><line style="stroke:#A80036;stroke-width:1.0;" x1="346" x2="387" y1="183.4199" y2="183.4199"/><polygon fill="#A80036" points="356,179.4199,346,183.4199,356,187.4199,352,183.4199" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209" x="352" y="165.6777">Generate case specific public key</text><line style="stroke:#A80036;stroke-width:1.0;" x1="345" x2="387" y1="212.7305" y2="212.7305"/><line style="stroke:#A80036;stroke-width:1.0;" x1="387" x2="387" y1="212.7305" y2="225.7305"/><line style="stroke:#A80036;stroke-width:1.0;" x1="346" x2="387" y1="225.7305" y2="225.7305"/><polygon fill="#A80036" points="356,221.7305,346,225.7305,356,229.7305,352,225.7305" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="352" y="207.9883">Calculate shared secret / token</text><polygon fill="#A80036" points="556,251.041,566,255.041,556,259.041,560,255.041" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="345" x2="562" y1="255.041" y2="255.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="352" y="250.2988">Store client</text><polygon fill="#A80036" points="47,280.3516,37,284.3516,47,288.3516,43,284.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="41" x2="344" y1="284.3516" y2="284.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285" x="53" y="279.6094">Pairing response (health authority public key)</text><!--MD5=[037d8bc0d2656801b1dd9b0afb48364f]
@startuml
participant Bridge             as Bridge
participant HealthAuthorityAPI as API
database    MySQL              as MySQL
                      
Bridge ->  API    : POST /v1/cases/{caseUuid}/clients
API    ->  API    : Register client
API    ->  API    : Generate case specific public key
API    ->  API    : Calculate shared secret / token
API    ->  MySQL  : Store client
API    - -> Bridge : Pairing response (health authority public key)
@enduml

PlantUML version 1.2021.5(Sun Apr 25 13:20:28 CEST 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: NL
--></g></svg>