<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="607px" preserveAspectRatio="none" style="width:1335px;height:607px;" version="1.1" viewBox="0 0 1335 607" width="1335px" zoomAndPan="magnify"><defs><filter height="300%" id="f1jdw39asssrpq" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1jdw39asssrpq)" height="75.9316" style="stroke:#000000;stroke-width:2.0;" width="363.5" x="958" y="222.7305"/><rect fill="#FFFFFF" filter="url(#f1jdw39asssrpq)" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="363.5" x="958" y="341.9727"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="41" x2="41" y1="88.4883" y2="522.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="141.5" x2="141.5" y1="88.4883" y2="522.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="266" x2="266" y1="88.4883" y2="522.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="539.5" x2="539.5" y1="88.4883" y2="522.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="814" x2="814" y1="88.4883" y2="522.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1011" x2="1011" y1="88.4883" y2="522.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1269.5" x2="1269.5" y1="88.4883" y2="522.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="5" y="85.5352">Caregiver</text><ellipse cx="41" cy="15" fill="#FEFECE" filter="url(#f1jdw39asssrpq)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M41,23 L41,50 M28,31 L54,31 M41,50 L28,65 M41,50 L54,65 " fill="none" filter="url(#f1jdw39asssrpq)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="5" y="535.3711">Caregiver</text><ellipse cx="41" cy="548.3242" fill="#FEFECE" filter="url(#f1jdw39asssrpq)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M41,556.3242 L41,583.3242 M28,564.3242 L54,564.3242 M41,583.3242 L28,598.3242 M41,583.3242 L54,598.3242 " fill="none" filter="url(#f1jdw39asssrpq)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="119.5" y="85.5352">Index</text><ellipse cx="142" cy="15" fill="#FEFECE" filter="url(#f1jdw39asssrpq)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M142,23 L142,50 M129,31 L155,31 M142,50 L129,65 M142,50 L155,65 " fill="none" filter="url(#f1jdw39asssrpq)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="119.5" y="535.3711">Index</text><ellipse cx="142" cy="548.3242" fill="#FEFECE" filter="url(#f1jdw39asssrpq)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M142,556.3242 L142,583.3242 M129,564.3242 L155,564.3242 M142,583.3242 L129,598.3242 M142,583.3242 L155,598.3242 " fill="none" filter="url(#f1jdw39asssrpq)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1jdw39asssrpq)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="68" x="230" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="237" y="73.5352">PortalUI</text><rect fill="#FEFECE" filter="url(#f1jdw39asssrpq)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="68" x="230" y="521.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="237" y="542.3711">PortalUI</text><rect fill="#FEFECE" filter="url(#f1jdw39asssrpq)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="67" x="504.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="511.5" y="73.5352">Firewall</text><rect fill="#FEFECE" filter="url(#f1jdw39asssrpq)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="67" x="504.5" y="521.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="511.5" y="542.3711">Firewall</text><rect fill="#FEFECE" filter="url(#f1jdw39asssrpq)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="76" x="774" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="781" y="73.5352">PortalAPI</text><rect fill="#FEFECE" filter="url(#f1jdw39asssrpq)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="76" x="774" y="521.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="781" y="542.3711">PortalAPI</text><rect fill="#FEFECE" filter="url(#f1jdw39asssrpq)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="82" x="968" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="975" y="73.5352">PrivateAPI</text><rect fill="#FEFECE" filter="url(#f1jdw39asssrpq)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="82" x="968" y="521.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="975" y="542.3711">PrivateAPI</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1228.5" y="85.5352">SluiceRedis</text><path d="M1252,36 C1252,26 1270,26 1270,26 C1270,26 1288,26 1288,36 L1288,62 C1288,72 1270,72 1270,72 C1270,72 1252,72 1252,62 L1252,36 " fill="#FEFECE" filter="url(#f1jdw39asssrpq)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1252,36 C1252,46 1270,46 1270,46 C1270,46 1288,46 1288,36 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1228.5" y="535.3711">SluiceRedis</text><path d="M1252,548.3242 C1252,538.3242 1270,538.3242 1270,538.3242 C1270,538.3242 1288,538.3242 1288,548.3242 L1288,574.3242 C1288,584.3242 1270,584.3242 1270,584.3242 C1270,584.3242 1252,584.3242 1252,574.3242 L1252,548.3242 " fill="#FEFECE" filter="url(#f1jdw39asssrpq)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1252,548.3242 C1252,558.3242 1270,558.3242 1270,558.3242 C1270,558.3242 1288,558.3242 1288,548.3242 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><polygon fill="#A80036" points="254,115.7988,264,119.7988,254,123.7988,258,119.7988" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="41" x2="260" y1="119.7988" y2="119.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="48" y="115.0566">Register case for normal pairing</text><polygon fill="#A80036" points="528,145.1094,538,149.1094,528,153.1094,532,149.1094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="266" x2="534" y1="149.1094" y2="149.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250" x="273" y="144.3672">POST /api/case/{caseUuid}/pairingcode</text><polygon fill="#A80036" points="802,174.4199,812,178.4199,802,182.4199,806,178.4199" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="540" x2="808" y1="178.4199" y2="178.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250" x="547" y="173.6777">POST /api/case/{caseUuid}/pairingcode</text><polygon fill="#A80036" points="999,203.7305,1009,207.7305,999,211.7305,1003,207.7305" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="814" x2="1005" y1="207.7305" y2="207.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="821" y="202.9883">POST /v1/cases</text><path d="M958,222.7305 L1020,222.7305 L1020,229.7305 L1010,239.7305 L958,239.7305 L958,222.7305 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:2.0;" width="363.5" x="958" y="222.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="973" y="236.2988">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="171" x="1035" y="235.3652">[If reverse pairing code given]</text><polygon fill="#A80036" points="1258,257.3516,1268,261.3516,1258,265.3516,1262,261.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1011" x2="1264" y1="261.3516" y2="261.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222" x="1018" y="256.6094">Get reverse pairing request by code</text><polygon fill="#A80036" points="1022,286.6621,1012,290.6621,1022,294.6621,1018,290.6621" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1016" x2="1269" y1="290.6621" y2="290.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="1028" y="285.9199">Reverse pairing request</text><polygon fill="#A80036" points="1258,322.9727,1268,326.9727,1258,330.9727,1262,326.9727" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1011" x2="1264" y1="326.9727" y2="326.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="1018" y="322.2305">Store pairing by code</text><path d="M958,341.9727 L1020,341.9727 L1020,348.9727 L1010,358.9727 L958,358.9727 L958,341.9727 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="363.5" x="958" y="341.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="973" y="355.541">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="171" x="1035" y="354.6074">[If reverse pairing code given]</text><polygon fill="#A80036" points="1258,376.5938,1268,380.5938,1258,384.5938,1262,380.5938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1011" x2="1264" y1="380.5938" y2="380.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235" x="1018" y="375.8516">Update reverse pairing request status</text><polygon fill="#A80036" points="825,412.9043,815,416.9043,825,420.9043,821,416.9043" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="819" x2="1010" y1="416.9043" y2="416.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="831" y="412.1621">Pairing code JSON response</text><polygon fill="#A80036" points="277,442.2148,267,446.2148,277,450.2148,273,446.2148" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="271" x2="813" y1="446.2148" y2="446.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="283" y="441.4727">Pairing code JSON response</text><polygon fill="#A80036" points="52,471.5254,42,475.5254,52,479.5254,48,475.5254" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="46" x2="265" y1="475.5254" y2="475.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="58" y="470.7832">Pairing code</text><polygon fill="#A80036" points="130,500.8359,140,504.8359,130,508.8359,134,504.8359" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="41" x2="136" y1="504.8359" y2="504.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="48" y="500.0938">Pairing code</text><!--MD5=[b6ccfcc43232e4591d96284aefb719b7]
@startuml
actor       Caregiver          as Caregiver
actor       Index              as Index
participant PortalUI           as PortalUI
participant Firewall           as Firewall
participant PortalAPI          as PortalAPI
participant PrivateAPI         as API
database    SluiceRedis        as Redis

Caregiver  ->  PortalUI   : Register case for normal pairing
PortalUI   ->  Firewall   : POST /api/case/{caseUuid}/pairingcode
Firewall   ->  PortalAPI  : POST /api/case/{caseUuid}/pairingcode
PortalAPI  ->  API        : POST /v1/cases

alt If reverse pairing code given
    API    ->  Redis      : Get reverse pairing request by code
    Redis  - -> API        : Reverse pairing request
end

API        ->  Redis      : Store pairing by code

alt If reverse pairing code given
    API    ->  Redis      : Update reverse pairing request status
end

API        - -> PortalAPI  : Pairing code JSON response
PortalAPI  - -> PortalUI   : Pairing code JSON response
PortalUI   - -> Caregiver  : Pairing code
Caregiver  - -> Index      : Pairing code
@enduml

PlantUML version 1.2021.5(Sun Apr 25 13:20:28 CEST 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: NL
--></g></svg>